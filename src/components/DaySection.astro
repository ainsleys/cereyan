---
import type { Screening } from '../types';
import type { Language } from '../i18n/translations';
import { t } from '../i18n/translations';
import { getDayName, formatDate } from '../utils/dates';
import ScreeningCard from './ScreeningCard.astro';

interface Props {
  date: string;
  screenings: Screening[];
  lang: Language;
  showPastScreeningsLink?: boolean;
}

const { date, screenings, lang, showPastScreeningsLink = false } = Astro.props;

const dayName = getDayName(date, lang);
const formattedDate = formatDate(date, lang);
---

<section class="mb-10" data-day-section={date}>
  <!-- Date header -->
  <header class="mb-4 pb-2 border-b border-border">
    <div class="flex items-baseline justify-between gap-3">
      <div class="flex items-baseline gap-3">
        <h2 class="date-header mb-0">
          {dayName}
        </h2>
        <span class="text-sm text-text-muted">
          {formattedDate}
        </span>
      </div>
      {showPastScreeningsLink && (
        <a 
          href="#past-screenings" 
          class="text-xs text-text-muted hover:text-cereyan-pink transition-colors flex items-center gap-1"
        >
          {t(lang, 'calendar.viewPastScreenings')}
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
          </svg>
        </a>
      )}
    </div>
  </header>

  <!-- Screenings list -->
  <div class="space-y-4">
    {screenings.map((screening, index) => (
      <ScreeningCard 
        screening={screening} 
        lang={lang} 
        index={index}
      />
    ))}
  </div>
</section>
